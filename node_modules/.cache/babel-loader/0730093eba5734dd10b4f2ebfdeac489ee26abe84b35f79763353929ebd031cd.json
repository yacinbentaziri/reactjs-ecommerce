{"ast":null,"code":"import axios from \"axios\";\nconst jwtInterceptor = axios.create({});\njwtInterceptor.interceptors.response.use(response => {\n  return response;\n}, async error => {\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n  if (error.response.data.msg == \"jwt expired\") {\n    try {\n      await axios.get(\"http://localhost:8000/api/auth/refreshtoken/\" + user.data._id, {\n        withCredentials: true\n      });\n      const retryResponse = await retryOriginalRequest(error.config);\n      return retryResponse;\n    } catch (error) {\n      return Promise.reject();\n    }\n  }\n});\nconst retryOriginalRequest = async config => {\n  try {\n    const response = await axios(config);\n    return response;\n  } catch (error) {\n    return Promise.reject(error);\n  }\n};\nexport default jwtInterceptor;","map":{"version":3,"names":["axios","jwtInterceptor","create","interceptors","response","use","error","user","JSON","parse","localStorage","getItem","data","msg","get","_id","withCredentials","retryResponse","retryOriginalRequest","config","Promise","reject"],"sources":["D:/mern-ecommerce/reactjs/src/helpers/jwtInterceptor.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst jwtInterceptor = axios.create({})\r\njwtInterceptor.interceptors.response.use(\r\n    (response) => {\r\n        return response\r\n    }, async (error) => {\r\n        const user = JSON.parse(localStorage.getItem(\"user\"))\r\n        if (error.response.data.msg == \"jwt expired\") {\r\n            try {\r\n                await axios.get(\"http://localhost:8000/api/auth/refreshtoken/\" + user.data._id,{ withCredentials: true })\r\n                const retryResponse = await retryOriginalRequest(error.config);\r\n                return retryResponse;\r\n            } catch (error) {\r\n                return Promise.reject()\r\n            }\r\n        }\r\n    }\r\n)\r\nconst retryOriginalRequest = async (config) => {\r\n    try {\r\n        const response = await axios(config);\r\n        return response;\r\n    } catch (error) {\r\n        return Promise.reject(error);\r\n    }\r\n};\r\n\r\nexport default jwtInterceptor"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,cAAc,GAAGD,KAAK,CAACE,MAAM,CAAC,CAAC,CAAC,CAAC;AACvCD,cAAc,CAACE,YAAY,CAACC,QAAQ,CAACC,GAAG,CACnCD,QAAQ,IAAK;EACV,OAAOA,QAAQ;AACnB,CAAC,EAAE,MAAOE,KAAK,IAAK;EAChB,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;EACrD,IAAIL,KAAK,CAACF,QAAQ,CAACQ,IAAI,CAACC,GAAG,IAAI,aAAa,EAAE;IAC1C,IAAI;MACA,MAAMb,KAAK,CAACc,GAAG,CAAC,8CAA8C,GAAGP,IAAI,CAACK,IAAI,CAACG,GAAG,EAAC;QAAEC,eAAe,EAAE;MAAK,CAAC,CAAC;MACzG,MAAMC,aAAa,GAAG,MAAMC,oBAAoB,CAACZ,KAAK,CAACa,MAAM,CAAC;MAC9D,OAAOF,aAAa;IACxB,CAAC,CAAC,OAAOX,KAAK,EAAE;MACZ,OAAOc,OAAO,CAACC,MAAM,CAAC,CAAC;IAC3B;EACJ;AACJ,CACJ,CAAC;AACD,MAAMH,oBAAoB,GAAG,MAAOC,MAAM,IAAK;EAC3C,IAAI;IACA,MAAMf,QAAQ,GAAG,MAAMJ,KAAK,CAACmB,MAAM,CAAC;IACpC,OAAOf,QAAQ;EACnB,CAAC,CAAC,OAAOE,KAAK,EAAE;IACZ,OAAOc,OAAO,CAACC,MAAM,CAACf,KAAK,CAAC;EAChC;AACJ,CAAC;AAED,eAAeL,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}