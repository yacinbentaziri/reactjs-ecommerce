{"ast":null,"code":"import axios from \"axios\";\nconst jwtInterceptor = axios.create({});\njwtInterceptor.interceptors.response.use(response => {\n  return response;\n}, async error => {\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n  if (error.response.data.msg == \"jwt expired\") {\n    try {\n      const resp = await axios.get(\"http://localhost:8000/api/auth/refreshtoken/\" + user.data._id, {\n        withCredentials: true\n      });\n      const retryResponse = await retryOriginalRequest(error.config);\n      return retryResponse;\n    } catch (error) {\n      return Promise.reject();\n    }\n  }\n});\nconst retryOriginalRequest = async config => {\n  try {\n    const response = await axios(config);\n    return response;\n  } catch (error) {\n    return Promise.reject(error);\n  }\n};\nexport default jwtInterceptor;","map":{"version":3,"names":["axios","jwtInterceptor","create","interceptors","response","use","error","user","JSON","parse","localStorage","getItem","data","msg","resp","get","_id","withCredentials","retryResponse","retryOriginalRequest","config","Promise","reject"],"sources":["D:/mern-ecommerce/reactjs/src/helpers/jwtInterceptor.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst jwtInterceptor = axios.create({})\r\njwtInterceptor.interceptors.response.use(\r\n    (response) => {\r\n        return response\r\n    }, async (error) => {\r\n        const user = JSON.parse(localStorage.getItem(\"user\"))\r\n        if (error.response.data.msg == \"jwt expired\") {\r\n            try {\r\n                const resp = await axios.get(\"http://localhost:8000/api/auth/refreshtoken/\" + user.data._id,\r\n                    { withCredentials: true })\r\n\r\n                const retryResponse = await retryOriginalRequest(error.config);\r\n                return retryResponse;\r\n            } catch (error) {\r\n                return Promise.reject()\r\n            }\r\n        }\r\n    }\r\n)\r\nconst retryOriginalRequest = async (config) => {\r\n    try {\r\n      const response = await axios(config);\r\n      return response;\r\n    } catch (error) {\r\n      return Promise.reject(error);\r\n    }\r\n  };\r\n  \r\nexport default jwtInterceptor"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,cAAc,GAAGD,KAAK,CAACE,MAAM,CAAC,CAAC,CAAC,CAAC;AACvCD,cAAc,CAACE,YAAY,CAACC,QAAQ,CAACC,GAAG,CACnCD,QAAQ,IAAK;EACV,OAAOA,QAAQ;AACnB,CAAC,EAAE,MAAOE,KAAK,IAAK;EAChB,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;EACrD,IAAIL,KAAK,CAACF,QAAQ,CAACQ,IAAI,CAACC,GAAG,IAAI,aAAa,EAAE;IAC1C,IAAI;MACA,MAAMC,IAAI,GAAG,MAAMd,KAAK,CAACe,GAAG,CAAC,8CAA8C,GAAGR,IAAI,CAACK,IAAI,CAACI,GAAG,EACvF;QAAEC,eAAe,EAAE;MAAK,CAAC,CAAC;MAE9B,MAAMC,aAAa,GAAG,MAAMC,oBAAoB,CAACb,KAAK,CAACc,MAAM,CAAC;MAC9D,OAAOF,aAAa;IACxB,CAAC,CAAC,OAAOZ,KAAK,EAAE;MACZ,OAAOe,OAAO,CAACC,MAAM,CAAC,CAAC;IAC3B;EACJ;AACJ,CACJ,CAAC;AACD,MAAMH,oBAAoB,GAAG,MAAOC,MAAM,IAAK;EAC3C,IAAI;IACF,MAAMhB,QAAQ,GAAG,MAAMJ,KAAK,CAACoB,MAAM,CAAC;IACpC,OAAOhB,QAAQ;EACjB,CAAC,CAAC,OAAOE,KAAK,EAAE;IACd,OAAOe,OAAO,CAACC,MAAM,CAAChB,KAAK,CAAC;EAC9B;AACF,CAAC;AAEH,eAAeL,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}